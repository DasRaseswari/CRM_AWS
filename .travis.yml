# safelist
branches:
  only:
  - master
  
language: php
#sudo: required
#dist: trusty
#group: edge
php:
  - '5.6'
  - hhvm

#cache:
directories:
  - src
install:
  - composer
before_script: composer require atoum/atoum
script: vendor/bin/atoum
before_script:
   - chmod 0777 ./src
services:
   - mysql
script:
  - cd ./src/tests
  - phpunit EmailTest.php
  - cd ..
  - cd ..
after_success:
   - mkdir -p codedeploy
   - pwd
   - ls -al
   - zip -r neu-csye6225-Team2-ProjectCRM-${TRAVIS_JOB_NUMBER}.zip src appspec.yml || true
   - ls -al
   - mv neu-csye6225-Team2-ProjectCRM-${TRAVIS_JOB_NUMBER}.zip codedeploy || true
   - ls -al
   - pwd
   - cd codedeploy
   - ls -al
   - pwd
before_deploy:
   - cd ..
deploy:
 - provider: s3
   access_key_id: AKIAJHSK4OXYPAU33SIQ
   secret_access_key:
    secure: PsFwqqXq3nYVdkkcy26d+axNkIuhHjD7W1yXzqBfZdCqxPm2gxUGSvbs+SjX5XiYdz/Cac6EK9M/8DbIJ9iZ3CExvKaVv1FFXQcB37ZVoJj+LIGDpX4pdscUz9xhcXCUQRk7BJ29ZqOSq3YPLcBitDhgJD/Uu6YVgG4DFeT/7jaBrMiRzz9Bn95P+2DnmQBHcGGZi9OojmXy3c3qKhAQnPB2Cz6YIQ+L8XZqZPiTSuNs8zQYdIg7ygPg1YkQtB6WWjCe3/DByz5dFtLSk9ih/vJsida9S6rSrcato9oihwAsJEHVR2WnrW9CVzOrzHw95bJOZD4ZDFg1lhauRRTzpJniGiLcVce3WIaaoBsroPcnyRbuxp2Zr4zfktnN77IzMLOz7tnpa0HQE1HSjBPfBSrTRbuEpeNNdtAJ8rU0dm3gfERfgB3obxIthqYpTZC/lXLlrI6siLIUBYrjm8JdNZKFRxjvb8tldvAibxWJg9qbh3sHmlCL7Dc6jr8SQVsWS/r4/o3c4INrMxZlsekl1ww9FwG15DMEmYRFifJL3souVVA4fLezkvlAdT5Q3DN4Lacbw1ggTKRPkSESpKXRSd1AUMkm1+5SXN9CmpK2YUFoB3S9+Heo+xfBemIZ6Jzt60sllHTb7GNOAVfTsEUmOdMGJ6RNcvRDDM0ht0mz/PI=
   local_dir: codedeploy
   bucket: code-deploy2.neu-csye6225-spring2017-team-2.com
   region: us-east-1
   skip_cleanup: true
 - provider: codedeploy
   access_key_id: AKIAJHSK4OXYPAU33SIQ
   secret_access_key:
    secure: PsFwqqXq3nYVdkkcy26d+axNkIuhHjD7W1yXzqBfZdCqxPm2gxUGSvbs+SjX5XiYdz/Cac6EK9M/8DbIJ9iZ3CExvKaVv1FFXQcB37ZVoJj+LIGDpX4pdscUz9xhcXCUQRk7BJ29ZqOSq3YPLcBitDhgJD/Uu6YVgG4DFeT/7jaBrMiRzz9Bn95P+2DnmQBHcGGZi9OojmXy3c3qKhAQnPB2Cz6YIQ+L8XZqZPiTSuNs8zQYdIg7ygPg1YkQtB6WWjCe3/DByz5dFtLSk9ih/vJsida9S6rSrcato9oihwAsJEHVR2WnrW9CVzOrzHw95bJOZD4ZDFg1lhauRRTzpJniGiLcVce3WIaaoBsroPcnyRbuxp2Zr4zfktnN77IzMLOz7tnpa0HQE1HSjBPfBSrTRbuEpeNNdtAJ8rU0dm3gfERfgB3obxIthqYpTZC/lXLlrI6siLIUBYrjm8JdNZKFRxjvb8tldvAibxWJg9qbh3sHmlCL7Dc6jr8SQVsWS/r4/o3c4INrMxZlsekl1ww9FwG15DMEmYRFifJL3souVVA4fLezkvlAdT5Q3DN4Lacbw1ggTKRPkSESpKXRSd1AUMkm1+5SXN9CmpK2YUFoB3S9+Heo+xfBemIZ6Jzt60sllHTb7GNOAVfTsEUmOdMGJ6RNcvRDDM0ht0mz/PI=
   bucket: code-deploy2.neu-csye6225-spring2017-team-2.com
   key: neu-csye6225-Team2-ProjectCRM-${TRAVIS_JOB_NUMBER}.zip
   bundle_type: zip
   application: Team2Deployment7
   deployment_group: Team2Deployment7group
   region: us-east-1
   wait-until-deployed: true
